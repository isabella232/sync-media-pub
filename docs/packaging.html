<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <title>Packaging Synchronized Narration for Web Publications</title>
  <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove' defer="defer"></script>
  <script class='remove'>
    var respecConfig = {
      specStatus: "CG-DRAFT",
      // specStatus: "ED"
      wg: "Synchronized Media for Publications Community Group",
      wgURI: "https://www.w3.org/community/sync-media-pub/",
      wgPublicList: "public-sync-media-pub",
      editors: [{
        name: "Marisa DeMeglio",
        "company": "DAISY Consortium",
        "companyURL": "http://www.daisy.org",
        "w3cid": 35713
      }, {
        name: "Daniel Weck",
        "company": "DAISY Consortium",
        "companyURL": "http://www.daisy.org",
        "w3cid": 45653
      }],
      edDraftURI: "https://w3c.github.io/sync-media-pub/packaging.html",
      shortName: "syncnarr",
      noRecTrack: true,
      copyrightStart: "2019",
      // prevRecURI: "",
      //postProcess: [show_orcid, create_wp],
      includePermalinks: true,
      permalinkEdge: true,
      permalinkHide: false,
      diffTool: "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
      github: {
        repoURL: "https://github.com/w3c/sync-media-pub",
        branch: "master"
      },
      localBiblio: {}
    };
  </script>
</head>

<body>
  <section id="abstract">
    <p>This document provides a draft version of Packaging for Synchronized Narration.</p>
  </section>

  <section id="sotd">
    <p>This draft is still under consideration within the Synchronized Media for Publications Community Group and is subject to change. The most prominent issues will be referenced in the document with links provided.</p>
  </section>

  <section id="syncnarr-packaging-introduction">
		<h1>Introduction</h1>

		<section id="syncnarr-packaging-terminology">
			<h2>Terminology</h2>

			<p>Terms with meanings specific to the publishing industry are capitalized in this document (e.g., "Reading System"). A complete list of these <a href="epub-spec.html#audio-terminology">terms and definitions</a> is provided in [[wpub]].</p>

			<p>Only the first instance of a term in a section is linked to its definition.</p>

			<p>In addition, the following terminology is defined for use in this specification:</p>

      <p><a href="https://github.com/w3c/sync-media-pub/issues/16">Issue #16: add packaging terminology </a></p>

			<dl class="termlist">
				<dt><dfn id="dfn-file-name" data-lt="File Names">VOCAB</dfn></dt>
				<dd>
          TODO
				</dd>
			</dl>

		</section>
	</section>

  <section>
    <h1>Specification</h1>

    <section id="with-webpub">
      <h2>Inclusion in a Web Publication</h2>

      <p class="issue"><a href="https://github.com/w3c/sync-media-pub/issues/15">Issue #15: clarify packaging rules</a></p>

      <section>
        <h3>Manifest Properties</h3>

        <p class="issue"><a href="https://github.com/w3c/sync-media-pub/issues/14">Issue #14: we need a manifest property named "alternative"</a></p>

        <p>Associating a synchronized narration document with a reading order resource is done by giving that resource a property called `alternative`:</p>

        <ul>
          <li><code>alternative</code>: A Linked Resource object in the reading order has this property to indicate its accompanying synchronized narration document.</li>
        </ul>

        <p>A synchronized narration document is a Linked Resource outside of the reading order, and it can have the following properties:</p>
        <ul>
          <li><code>duration</code>: as in Audio publications</li>
          <li><code>readBy</code>: as in Audio publications</li>
          <li><code>encodingFormat</code>: [application/vnd.wp-sync-media+json](narration.html#mimetype)</li>
        </ul>


        <p class="example">
          <pre>
            {
              "@context": ["https://schema.org", "https://www.w3.org/ns/wp-context"],
              "type": "AudioBook",
              "url": "https://publisher.example.org/mobydick",
              "author": "Herman Melville",
              "dateModified": "2018-02-10T17:00:00Z",

              "readBy": "Someone",
              "duration": "20000s",

              "sync-media-css-class-active": "-my-active-element",
              "sync-media-css-class-playing" "-my-document-playing",

              "readingOrder": [
                {
                  "url": "html/c001.html",
                  "alternative": "narration1.json"
                },
                {
                  "url": "html/c002.html",
                  "alternative": "narration2.json"
                }
              ],

              "resources": [
                "css/mobydick.css",
                {
                  "type": "LinkedResource",
                  "rel": "cover",
                  "url": "images/cover.jpg",
                  "encodingFormat": "image/jpeg"
                },{
                  "type": "LinkedResource",
                  "url": "html/toc.html",
                  "rel": "contents"
                },{
                  "type": "LinkedResource",
                  "url": "audio.mp3",
                  "encodingFormat": "audio/mpeg"
                },{
                  "type": "LinkedResource",
                  "url": "narration1.json",
                  "encodingFormat": "application/vnd.wp-sync-media+json",
                  "duration": "10000s"
                },{
                  "type": "LinkedResource",
                  "url": "narration2.json",
                  "encodingFormat": "application/vnd.wp-sync-media+json",
                  "duration": "10000s"
                }
              ]
            }
          </pre>
        </p>
      </section>

    </section>

  </section>

  <section id="syncmediapub-manifest-examples" class="appendix informative">
    <h1>Manifest examples</h1>
    <p class="issue"><a href="https://github.com/w3c/sync-media-pub/issues/17">Issue #17: Add more manifest examples to packaging</a></p>

    <ul>
      <li>Single document</li>
      <li>Text + audio</li>
      <li>Audio-only</li>
    </ul>
  </section>
</body>
</html>
